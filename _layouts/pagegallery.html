---
layout: page
---

<head>
</head>

<body>
    <div class="tab-container">
        <div class="tab-nav">
            <button class="tab-btn active" onclick="openYear(event, 'All')">All</button>
            {% assign years = site.galleries | map: "year" | uniq %}
            {% assign sorted_years = '' | split: '' %}
            {% assign pre_2018_year = '' %}

            {% for year in years %}
              {% if year == "pre-2018" %}
                {% assign pre_2018_year = year %}
              {% else %}
                {% assign sorted_years = sorted_years | push: year %}
              {% endif %}
            {% endfor %}

            {% assign sorted_years = sorted_years | sort | reverse %}

            {% if pre_2018_year != '' %}
              {% assign sorted_years = sorted_years | push: pre_2018_year %}
            {% endif %}

            {% for year in sorted_years %}
            <button class="tab-btn" onclick="openYear(event, '{{ year }}')">{{ year }}</button>
            {% endfor %}
        </div>

        <input type="text" id="searchInput" onkeyup="filterGalleries()" placeholder="Search for locations...">

        <div id="gallery-content">
        {% for year in sorted_years %}
        <div id="{{ year }}" class="tab-content is-visible">
            <h2>{{ year }}</h2>
            <div class="gallery-grid">
                {% assign galleries_by_year = site.galleries | where: "year", year %}
                {% for gallery in galleries_by_year %}
                {% for item in gallery.items %}
                <div class="card">
                    <div class="image-overlay-container">
                        <a href="{{ item.url }}">
                            <img src="{{ item.image }}"/>
                            <div class="card-text">{{ item.title }}</div>
                        </a>
                    </div>
                </div>
                {% endfor %}
                {% endfor %}
            </div>
        </div>
        {% endfor %}
        </div>
        
        <div id="search-results" class="gallery-grid" style="display: none;"></div>
    </div>

    <script>
    function initGalleryPage() {
        window.openYear = function(evt, yearName) {
          var i, tabcontent, tablinks;
          tabcontent = document.getElementsByClassName("tab-content");
          for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].classList.remove("is-visible");
          }
          tablinks = document.getElementsByClassName("tab-btn");
          for (i = 0; i < tablinks.length; i++) {
            tablinks[i].classList.remove("active");
          }

          if (yearName === "All") {
            for (i = 0; i < tabcontent.length; i++) {
              tabcontent[i].classList.add("is-visible");
            }
          } else {
            const targetElement = document.getElementById(yearName);
            if (targetElement) {
                targetElement.classList.add("is-visible");
            }
          }
          
          evt.currentTarget.classList.add("active");
          // After changing tabs, clear the search and show all galleries
          const searchInput = document.getElementById('searchInput');
          if (searchInput) {
            searchInput.value = '';
            window.filterGalleries();
          }
        }

        window.filterGalleries = function() {
            const input = document.getElementById('searchInput');
            if (!input) return; // Exit if search input doesn't exist

            const filter = input.value.toLowerCase();
            const galleryContent = document.getElementById('gallery-content');
            const searchResults = document.getElementById('search-results');
            
            if (filter.length > 0) {
                if (galleryContent) galleryContent.style.display = 'none';
                if (searchResults) {
                    searchResults.innerHTML = '';
                
                    const allCards = document.querySelectorAll('#gallery-content .card');
                    let matchesFound = false;

                    allCards.forEach(card => {
                        const title = card.querySelector('.card-text');
                        if (title) {
                            const txtValue = title.textContent || title.innerText;
                            if (txtValue.toLowerCase().indexOf(filter) > -1) {
                                searchResults.appendChild(card.cloneNode(true));
                                matchesFound = true;
                            }
                        }
                    });

                    if (!matchesFound) {
                        searchResults.innerHTML = '<p style="text-align: center; width: 100%;">No locations found.</p>';
                    }

                    searchResults.style.display = 'grid';
                }

            } else {
                if (galleryContent) galleryContent.style.display = 'block';
                if (searchResults) {
                    searchResults.style.display = 'none';
                    searchResults.innerHTML = '';
                }
            }
        }
    }

    // Initialize for normal page loads
    document.addEventListener('DOMContentLoaded', initGalleryPage);
    // Initialize for Hydejack's PJAX navigation
    window.addEventListener('hy:pjax:end', initGalleryPage);
    </script>

    {{ content }}
</body>