---
layout: null
permalink: /search.json
---
[
{% assign first = true %}
{% for page in site.pages %}
{% if page.title != nil and page.layout != nil %}
{% unless page.url contains '/assets/' or page.url contains '/licenses/' or page.url contains '/css/' or page.title == 'Search' or page.title == '404' or page.title == 'Redirect' or page.title == 'Home' or page.title == 'LICENSE' or page.url contains '/LICENSE/' or page.path == 'LICENSE.md' or page.sitemap == false %}
{% unless first %},
{% endunless %}
{% assign imageUrl = nil %}
{% for gallery in site.galleries %}
{% for item in gallery.items %}
{% if item.url == page.url %}
{% assign imageUrl = item.image %}
{% break %}
{% endif %}
{% endfor %}
{% if imageUrl %}
{% break %}
{% endif %}
{% endfor %}
{
  "title": {{ page.title | jsonify }},
  "url": {{ page.url | relative_url | jsonify }},
  "content": {{ page.content | strip_html | normalize_whitespace | truncatewords: 50 | jsonify }},
  "image": {{ imageUrl | jsonify }},
  "date": {{ page.date | date: "%Y-%m-%d" | jsonify }}
}
{% assign first = false %}
{% endunless %}
{% endif %}
{% endfor %}
{% for post in site.posts %}
{% unless first %},
{% endunless %}
{
  "title": {{ post.title | jsonify }},
  "url": {{ post.url | relative_url | jsonify }},
  "content": {{ post.content | strip_html | normalize_whitespace | truncatewords: 50 | jsonify }},
  "image": {{ post.image | jsonify }},
  "date": {{ post.date | date: "%Y-%m-%d" | jsonify }}
}
{% assign first = false %}
{% endfor %}
{% for project in site.projects %}
{% unless first %},
{% endunless %}
{
  "title": {{ project.title | jsonify }},
  "url": {{ project.url | relative_url | jsonify }},
  "content": {{ project.content | strip_html | normalize_whitespace | truncatewords: 50 | jsonify }},
  "image": {{ project.image | jsonify }},
  "date": {{ project.date | date: "%Y-%m-%d" | jsonify }}
}
{% assign first = false %}
{% endfor %}
]
